<article>
    <section class="list">
        <header class="clearfix">
            <div class="pull-left">&nbsp;</div>
            <div class="pull-right hidden-print">
                <button class="btn btn-mini disabled" id="list-export">
                    <span>Export</span>&nbsp;<i class="icon-download-alt"></i>
                </button>
                <button id="createTag" class="btn btn-mini">
                    Create Tag
                </button>
            </div>
        </header>
        <div class="accordion items" id="accordion">
            <div class="item row-fluid hide" id="newTag">
                <div class="span8">
                    <input id="tagName" type="text" placeholder="Tag name" required="required" class="input-medium"/>
                </div>
                <div class="span4 alignRight">
                    <button id="cancelNewTag" class="btn btn-mini">
                        Cancel
                    </button>
                    <button id="submitTag" class="btn btn-mini btn-primary">
                        Confirm
                    </button>
                </div>
            </div>
            <% if (data.length != 0) { %>
                <% _.each(data, function (tag) { %>
                    <div class="accordion-group item clearfix">
                        <div class="accordion-heading row-fluid">
                            <span class="desc span8">
                                <a class="accordion-toggle" data-parent="#accordion" href="#<% print(tag.tag_name.replace(' ', '')); %>">
                                    <i class="icon-circle-arrow-down"></i>&nbsp;<%= tag.tag_name %>
                                </a>
                            </span>
                            <div style="margin-top: 6px" class="span4 alignRight">
                                <span class="badge badge-inverse"><%= tag.nodes.length %></span>&nbsp;
                                <button type="button" class="btn btn-link" name="confirmDelete" id="<%= tag.tag_name %>"><i style="color: red;" class="icon-remove"></i></button>
                                <div name="confirmDelete" class="hide">
                                    <button name="remove" class="btn btn-mini btn-danger" value="<%= tag.tag_name %>">Delete</button>
                                    <button name="cancelDelete" class="btn btn-mini">Cancel</button>
                                </div>
                            </div>
                        </div>
                        <div id="<% print(tag.tag_name.replace(' ', '')); %>" class="accordion-body collapse">
                            <div class="accordion-inner">
                                <div class="pull-left">
                                <% if (tag.nodes.length != 0) { %>
                                    <% _.each(tag.nodes, function (node) { %>
                                        <span class="label label-info" name="<%= node %>"><%= node %></span>
                                    <% }); %>
                                <% } else { %>
                                    <em name="nonode">No nodes contain this tag</em>
                                <% } %>
                                </div>
                                &nbsp;<button type="button" class="btn btn-link" name="popover" value="<%= tag.tag_name %>"><i style="color: green;" class="icon-plus"></i></button>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <div class="items">
                    <div class="item clearfix" name="notags">
                        <span class="desc"><em>No tags available.</em></span>
                    </div>
                </div>
            <% } %>
        </div>
    </section>
    <section id="hide" class="hide">
        <div class="list" id="nodelist">
            <div class="items" style="max-height: 150px; overflow: auto;">
                <% if (nodelist && nodelist.nodes && nodelist.nodes.length != 0) { %>
                    <% _.each(nodelist.nodes, function (node) { %>
                        <div class="item clearfix">
                            <label name="<%= node.ip %>" class="checkbox"><%= node.ip %><input name="nodelist" type="checkbox" value="<%= node.id %>"/></label>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="item clearfix">
                        <span><small><em>No nodes available</em></small></span>
                    </div>
                <% } %>
            </div>
        </div>
    </section>
</article>